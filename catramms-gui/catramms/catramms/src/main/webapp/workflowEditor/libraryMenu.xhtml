<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

<!--
<p:commandButton id="dynaButtonMain" value="Workspace Library" type="button" icon="ui-icon-extlink"/>

<p:tieredMenu styleClass="tieredMenuClass" overlay="true" trigger="dynaButtonMain"
              my="left top" at="left bottom" style="width:200px">
-->

<p:remoteCommand name="diagram_addTask"
                 actionListener="#{workflowEditor.addTask}" />

<script type="application/javascript">
    function addTask(menuItem, taskType)
    {
        var contextMenuId = document.getElementById("viewForm:workspaceDiagramMenuContext");

        // console.log("contextMenuId", contextMenuId)
        // we know the div of contextMenu contains style/left/top
        var contextMenuIdX = contextMenuId.style['left'];
        var contextMenuIdY = contextMenuId.style['top'];
        // console.log("addTask", contextMenuIdX, contextMenuIdY)

        diagram_addTask([
            {name : 'taskType', value : taskType},
            {name : 'positionX', value : contextMenuIdX},
            {name : 'positionY', value : contextMenuIdY}
        ]);
    }
</script>

<p:contextMenu id="workspaceDiagramMenuContext" for="workspaceDiagram">
    <p:submenu label="Add Task">
        <p:submenu label="Content">
            <p:menuitem onclick="addTask(this, 'Add-Content')"
                        value="Add-Content"
                        icon="/resources/img/workspaceElements/Add-Content-icon.png"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Remove-Content')"
                        value="Remove-Content"
                        icon="fa fa-eraser"
                        update="workspaceDiagram"
                    />
        </p:submenu>
        <p:submenu label="Concat, Cut and Extract">
            <p:menuitem onclick="addTask(this, 'Concat-Demuxer')"
                        value="Concat-Demuxer"
                        icon="fa fa-forward"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Cut')"
                        value="Cut"
                        icon="fa fa-cut"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Extract-Tracks')"
                        value="Extract-Tracks"
                        icon="fas fa-arrow-alt-from-bottom"
                        update="workspaceDiagram"
                    />
        </p:submenu>
        <p:menuitem onclick="addTask(this, 'Encode')"
                    value="Encode"
                    icon="fa fa-file-video-o"
                    update="workspaceDiagram"
                />
        <p:submenu label="Overlay">
            <p:menuitem onclick="addTask(this, 'Overlay-Image-On-Video')"
                        value="Overlay-Image-On-Video"
                        icon="fa fa-file-picture-o"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Overlay-Text-On-Video')"
                        value="Overlay-Text-On-Video"
                        icon="fa fa-file-powerpoint-o"
                        update="workspaceDiagram"
                    />
        </p:submenu>
        <p:submenu label="Frame Processing">
            <p:menuitem onclick="addTask(this, 'Frame')"
                        value="Frame"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Periodical-Frames')"
                        value="Periodical-Frames"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'I-Frames')"
                        value="I-Frames"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Motion-JPEG-by-Periodical-Frames')"
                        value="Motion-JPEG-by-Periodical-Frames"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Motion-JPEG-by-I-Frames')"
                        value="Motion-JPEG-by-I-Frames"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Slideshow')"
                        value="Slideshow"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
                    />
        </p:submenu>
        <p:submenu label="Delivery">
            <p:menuitem onclick="addTask(this, 'FTP-Delivery')"
                        value="FTP"
                        icon="fa fa-upload"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Local-Copy')"
                        value="Local-Copy"
                        icon="fa fa-copy"
                        update="workspaceDiagram"
            />
        </p:submenu>
        <p:submenu label="Social Network Delivery">
            <p:menuitem onclick="addTask(this, 'Post-On-Facebook')"
                        value="Post on Facebook"
                        icon="fa fa-upload"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'Post-On-YouTube')"
                        value="Post on YouTube"
                        icon="fa fa-upload"
                        update="workspaceDiagram"
                    />
        </p:submenu>
        <p:submenu label="Communication">
            <p:menuitem onclick="addTask(this, 'Email-Notification')"
                        value="Email-Notification"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
                    />
            <p:menuitem onclick="addTask(this, 'HTTP-Callback')"
                        value="HTTP-Callback"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
            />
        </p:submenu>
        <p:submenu label="Computer Vision">
            <p:menuitem onclick="addTask(this, 'Face-Recognition')"
                        value="Face-Recognition"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
            />
            <p:menuitem onclick="addTask(this, 'Face-Identification')"
                        value="Face-Identification"
                        icon="ui-icon-close"
                        update="workspaceDiagram"
            />
        </p:submenu>
    </p:submenu>
    <p:menuitem onclick="addTask(this, 'GroupOfTasks')"
                value="Add Group of Tasks"
                icon="/resources/img/workspaceElements/GroupOfTasks-icon.png"
                update="workspaceDiagram"
            />
    <p:menuitem value="Delete Task"
                icon="ui-icon-close"
                actionListener="#{workflowEditor.deleteNode}"
            />
</p:contextMenu>

</html>
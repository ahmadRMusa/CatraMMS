{
	"log": {
		"mms": {
			"stdout": false,
			"pathName": "/var/catramms/logs/mmsEngineService/mmsEngineService.log",
			"level": "info",
			"pattern": "[%Y-%m-%d %H:%M:%S.%e] [%n] [%l] [tid %t] %v"
		},
		"api": {
			"stdout": false,
			"pathName": "/var/catramms/logs/mmsAPI/mmsAPI.log",
			"level": "info",
			"pattern": "[%Y-%m-%d %H:%M:%S.%e] [%n] [%l] [tid %t] %v"
		},
		"encoder": {
			"stdout": false,
			"pathName": "/var/catramms/logs/mmsEncoder/mmsEncoder.log",
			"level": "info",
			"pattern": "[%Y-%m-%d %H:%M:%S.%e] [%n] [%l] [tid %t] %v"
		}
	},
	"database": {
		"enginePoolSize": 30,
		"ffmpegEncoderPoolSize": 5,
		"apiPoolSize": 10,
		"server": "tcp://rsis-cp-wedep1.media.int:3306",
		"userName": "u_vedatest",
		"password": "5uaYRgbZNbz4Z5T_DMmuI0",
		"dbName": "vedatest",
		"selectTestingConnection": "select count(*) from MMS_TestConnection",
		"dbConnectionPoolStatsReportPeriodInSeconds": 300
	},
	"storage": {
		"path": "/var/catramms/storage",
		"freeSpaceToLeaveInEachPartitionInMB": 5
	},
	"scheduler": {
		"threadSleepInMilliSecs": 100,
		"checkIngestionTimesPeriodInMilliSecs": 10000,
		"checkEncodingTimesPeriodInMilliSecs": 5000,
		"contentRetentionTimesSchedule": "* * * * * * 0,30",
		"mainAndBackupRunningHALiveRecordingTimesSchedule": "* * * * * * 15,45"
	},
	"download": {
		// starting from the second attempt, resume will be used
		"maxDownloadAttemptNumber": 5,
		"progressUpdatePeriodInSeconds": 2,
		"secondsWaitingAmongDownloadingAttempt": 5,
		"downloadChunkSizeInMegaBytes": 500
	},
	"mms": {
		"processorThreads": 4,
		"maxAdditionalProcessorThreads": 30,
		"maxFaceRecognitionNumber": 3,
		"confirmationCodeRetentionInDays": 7,
		"maxIngestionJobsPerEvent": 5,
		"maxEncodingJobsPerEvent": 20,
		"dependencyExpirationInHours": 24,
		// retention of every content if not specified in the Parameters json section
		"contentRetentionInMinutesDefaultValue": 60,
		// IngestionJobs marked as SourceCopingInProgress, SourceMovingInProgress,
		// SourceUploadingInProgress, SourceDownloadingInProgress, not received
		// are set as Failed after the below retention
		"contentNotTransferredRetentionInDays": 5,
		// in case of live recording, MMS starts to prepare resources
		// a number of minutes before the beginning of the live to record
		"liveRecording_timeBeforeToPrepareResourcesInMinutes": 10,
		"localCopyTaskEnabled": true,
		"guiProtocol": "https",
		"guiHostname": "mms-gui.rsi.ch",
		"guiPort": 443,
		"locks": {
			// We have to reduce the following log messages
			//		MMSEngineDBFacade_Lock.cpp:127 setLock Ingestion, label: APIIngestion, already locked by ...
			// because the previous message could cause:
			// - delay managing the tasks
			// - failure in case it will not be able to take the lock and run the task
			// To do that we have to tune the parameters in this section ('Locks')
			// and the parameters in the 'Scheduler' section

			// enough high to avoid that the request is not managed and fails
			"maxSecondsToWaitAPIIngestionLock": 60,

			// enough high to avoid that the request is not managed and fails
			"maxSecondsToWaitUpdateEncodingJobLock": 120,

			// set to 0 to leave priority on API::Ingestion.
			// Remember that Engine is very aggressive to take the lock since we have
			// many Processors and an aggressive schedule (2000 millisecs).
			// In case we will not set to 0, API::Ingestion will not be able to take the lock
			// and ingestions calls will get timeout (internally will be always Already Locked)
			"maxSecondsToWaitCheckIngestionLock": 0,

			// a bit in order to take the encodings left by the other Engines
			"maxSecondsToWaitCheckEncodingJobLock": 5,

			// a bit in order to take the chunks left by the other Engines
			"maxSecondsToWaitMainAndBackupLiveChunkLock": 5
		}
	},
	"api": {
		"protocol": "https",
		"hostname": "mms-api.rsi.ch",
		"port": 443,
		"user": "8",
		"password": "WIbg0~px7af0LHIDjG8kKTN9oQdjRru90XbMRSvACIxfsysNktag2GfvkNv9J~xOU0",
		"ingestionURI": "/catramms/v1/ingestion",
		"threadsNumber": 5,
		// make sure FcgidMaxRequestLen is set correctly
		"maxContentLength": 1000000,
		"encodingPriorityWorkspaceDefaultValue": "low",
		"encodingPeriodWorkspaceDefaultValue": "daily",
		"maxIngestionsNumberWorkspaceDefaultValue": 20000,
		"maxStorageInMBWorkspaceDefaultValue": 1000,
		"activeDirectory": {
			"enabled": true,
			"ldapURL": "ldap://media.int:389",
			"managerUserName": "svc-rsi-adread09",
			"managerPassword": "MP-data-processor",
			"baseDn": "DC=media,DC=int",
			"defaultWorkspaceKey": 1
		},
		"binary": {
			"maxContentLength": 10737418240,
			// 10KB
			// "binaryBufferLength": 101024,
			// WebServerPort is used to get the file upload progress
			"webServerPort": 80,
			"progressURI": "/catramms/binary/uploadProgress",
			"progressUpdatePeriodInSeconds": 4,
			"maxProgressCallFailures": 5
		},
		"delivery": {
			"defaultTTLInSeconds": 120,
			"defaultMaxRetries": 10,
			"defaultRedirect": false,
			"deliveryProtocol": "https",
			"deliveryHost": "mms-delivery.rsi.ch"
		}
	},
	"encoding": {
		"predefinedProfiles": {
			"videoDir": "/opt/catramms/CatraMMS/predefinedEncodingProfiles/video",
			"audioDir": "/opt/catramms/CatraMMS/predefinedEncodingProfiles/audio",
			"imageDir": "/opt/catramms/CatraMMS/predefinedEncodingProfiles/image"
		},
		"maxEncodingFailures": 3,
		"mp4Encoder": "FFMPEG",
		"mpeg2TSEncoder": "FFMPEG",
		"intervalInSecondsToCheckEncodingFinished": 5,
		"secondsToWaitNFSBuffers": 5
	},
	"ffmpeg": {
		"path": "/opt/catramms/ffmpeg-4.1.3/bin",
		"tempDir": "/var/catramms/storage/MMSTranscoderWorkingAreaRepository/ffmpeg",
		"ttfFontDir": "/opt/catramms/CatraMMS/ttfFont",
		"maxEncodingsCapability": 3,
		"maxLiveRecordingsCapability": 6,
		"liveRecorderChunksIngestionCheckInSeconds": 5,
		"encodingCompletedRetentionInSeconds": 300,
		"hosts": {
			"common": [
				"rsis-lab-mmst.media.int",
				"rsis-cp-mms2.media.int"
			]
		},
		"encoderProtocol": "http",
		"encoderPort": 80,
		"encoderUser": "8",
		"encoderPassword": "WIbg0~px7af0LHIDjG8kKTN9oQdjRru90XbMRSvACIxfsysNktag2GfvkNv9J~xOU0",
		"encoderProgressURI": "/catramms/v1/encoder/progress",
		"encoderStatusURI": "/catramms/v1/encoder/status",
		"encodeURI": "/catramms/v1/encoder/encode",
		"overlayImageOnVideoURI": "/catramms/v1/encoder/overlayImageOnVideo",
		"overlayTextOnVideoURI": "/catramms/v1/encoder/overlayTextOnVideo",
		"generateFramesURI": "/catramms/v1/encoder/generateFrames",
		"slideShowURI": "/catramms/v1/encoder/slideShow",
		"liveRecorderURI": "/catramms/v1/encoder/liveRecorder",
		"videoSpeedURI": "/catramms/v1/encoder/videoSpeed",
		"encoderKillEncodingURI": "/catramms/v1/encoder"
	},
	"computerVision": {
		"cascadePath": "/opt/catramms/opencv/share/opencv4/haarcascades",
		"defaultScale": 1.1,
		"defaultMinNeighbors": 2,
		"defaultTryFlip": true
	},
	"FacebookGraphAPI": {
		"protocol": "https",
		"hostName": "graph-video.facebook.com",
		"port": 443,
		"version": "v2.3",
		"timeout": 120
	},
	"YouTubeDataAPI": {
		"protocol": "https",
		"hostName": "www.googleapis.com",
		"port": 443,
		"timeout": 120,
		"uploadVideoURI": "/upload/youtube/v3/videos?uploadType=resumable&part=snippet,status,contentDetails",
		"refreshTokenURI": "/oauth2/v4/token",
		"clientId": "700586767360-96om12ccsf16m41qijrdagkk0oqf2o7m.apps.googleusercontent.com",
		"clientSecret": "Uabf92wFTF80vOL3z_zzRUtT"
	},
	"EmailNotification": {
		"protocol": "smtp",
		"server": "smtprelay.media.int",
		"port": 25,
		"userName": "",
		"password": "",
		"from": "giuliano.catrambone@rsi.ch",
		"cc": "giuliano.catrambone@rsi.ch"
	}
}
